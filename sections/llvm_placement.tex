\section{LLVM 中如何实现这个算法}


\begin{frame}
    \frametitle{TL; DR}

    算法主体主要实现在 lib/CodeGen/MachineBlockPlacement.cpp

    \vspace{1.5em}

    其中分支概率等信息来源于 Block\{Frequency, ProbabilityInfo\}

    \vspace{1.5em}

    各个 Target 需要实现 \{ analyze, insert, remove \}Branch等虚函数，RISC-V在 5 年前，D40808
    \cite{llvmriscvimplbranchanalysis2022}实现。
    \begin{table}
        \begin{tabular}{ccc}
            \toprule
            功能     & 实现                  & 源代码位置                                                                         \\
            \midrule
            边权     & BlockFrequency        & \cite{llvmblockfreqinfoimpl2022}                                                   \\
            块放置   & MachineBlockPlacement & buildCFGChains()\cite{llvmmachineblockplacement2022}                               \\
            块对齐   & MachineBlockPlacement & alignBlocks()\cite{llvmmachineblockplacement2022}                                  \\
            分支分析 & RISCVInstrInfo        & analyzeBranch()\cite{llvmriscvinstrinfo2022}\cite{llvmriscvimplbranchanalysis2022} \\
            \bottomrule
        \end{tabular}
        \caption{各个功能的实现情况和所在的位置}
    \end{table}

\end{frame}